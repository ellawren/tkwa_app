<% content_for :page_header do %>
<% provide :title, @project.name.html_safe %>

    <% if @project.status == "potential" %>
        <a class="header-label" href="/potential_projects">Potential Projects</a>
        <div class="page-header">
            <h1><%= @project.name %></h1>
    <% elsif @project.status == "current" %>
        <a class="header-label" href="/projects/current">Current Projects</a>
        <div class="page-header">
            <h1><span class="light"><%= strip(@project.number) %></span><%= @project.name %></h1>
    <% else %>
        <div class="page-header">
            <h1><span class="light"><%= strip(@project.number) %></span><%= @project.name %></h1>
    <% end %>
        <ul class="controls">
            <!--
            <% unless @project.status == "potential" %>
                <li><a href="#options" class="glyphicon glyphicon-eye-open tip" role="button" data-toggle="modal" title="View Options"></a></li>
            <% end %>-->
            <li><%= link_to "", projects_path, class: "glyphicon glyphicon-search tip", title:"Search Projects" %></li>
            <li><%= link_to "", new_project_path, class: "glyphicon glyphicon-plus tip", title:"Add New Project" %></li>
            <li class="delete"><%= link_to "", @project, method: :delete, confirm: "Are you sure you want to delete this project and all its data?", class: "glyphicon glyphicon-remove tip", title:"Delete This Project" %>
            </li>
        </div>		
<% end %>

<% content_for :tabnav do %>
	<%= render "tabnav" %>
<% end %>

<% content_for :content do %>
  	<%= content_for?(:projects_content) ? yield(:projects_content) : yield %>
<% end %>

<%= render :template => 'layouts/application' %>

<!-- modal for view options -->
<div id="options" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none;">

    <%= form_for @project do |f| %>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">
                        View Options
                    </h4>
                </div>
                
                <div class="modal-body">
                    Select sections to toggle view on or off. The Info, Team, Scope, and Billing sections will always be visible by default.<br><br>
            
                    <% Project::VIEW_OPTIONS.each do |option| %>
                        <label class="checkbox">
                            <%= check_box_tag "project[view_options][]", option, @project.view_options.include?(option), data_toggle: "checkbox" %>
                            <%= option %>
                        </label>
                    <% end %>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <%= f.submit "Save Options", class: "btn btn-primary" %>
                </div>

            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    <% end %>
  
</div>
<!-- end modal -->

